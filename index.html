<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Letter to Congress — Make Your Voice Heard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700;900&family=Source+Sans+3:wght@400;600;700;900&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js" defer></script>
</head>
<body>
    <!-- DISCLAIMER BANNER -->
    <div id="disclaimer-bar">
        <div class="disclaimer-inner">
            <span class="disclaimer-icon">&#9432;</span>
            This is an <strong>independent civic engagement tool</strong> — not affiliated with, endorsed by, or connected to any government agency, political party, or elected official.
        </div>
    </div>

    <!-- HEADER -->
    <header id="main-header">
        <div class="header-inner">
            <div class="logo-group">
                <div class="seal">
                    <div class="seal-inner">
                        <div class="seal-star">&#9733;</div>
                        <div class="seal-text">WE THE PEOPLE</div>
                    </div>
                </div>
                <div class="logo-text">
                    <h1>Letter to Congress</h1>
                    <p class="tagline">Your Voice. Your Representatives. Your Points.</p>
                </div>
            </div>
            <div class="header-stats">
                <div class="stat-pill" id="header-total-letters">
                    <span class="stat-number" id="globalLetterCount">0</span>
                    <span class="stat-label">Letters Sent</span>
                </div>
                <div class="stat-pill active" id="header-your-score">
                    <span class="stat-number" id="yourScore">0</span>
                    <span class="stat-label">Your Points</span>
                </div>
            </div>
        </div>
    </header>

    <!-- HERO -->
    <section id="hero">
        <div class="hero-bg"></div>
        <div class="hero-content">
            <h2>Democracy Is a <span class="highlight">Team Sport</span></h2>
            <p class="hero-sub">Look up your representatives, write a letter, and earn points for your state. Every letter = <strong>10 points</strong>. Which state will lead the nation?</p>
            <div class="hero-cta">
                <div class="zip-search-hero">
                    <label for="heroZip" class="sr-only">Enter your ZIP code</label>
                    <input type="text" id="heroZip" maxlength="5" pattern="[0-9]{5}" placeholder="Enter your ZIP code" inputmode="numeric" autocomplete="postal-code">
                    <button id="heroSearchBtn" onclick="app.lookupZip()">
                        <span>Find My Reps</span>
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </button>
                </div>
            </div>
            <div class="hero-badges">
                <span class="badge">&#128274; No data stored</span>
                <span class="badge">&#9888;&#65039; Not a government site</span>
                <span class="badge">&#127942; Earn achievements</span>
            </div>
        </div>
    </section>

    <!-- HOW IT WORKS -->
    <section id="how-it-works">
        <h2 class="section-title">How It Works</h2>
        <div class="steps-row">
            <div class="step-card">
                <div class="step-num">1</div>
                <div class="step-icon">&#128269;</div>
                <h3>Look Up</h3>
                <p>Enter any ZIP code to find your Senators and Representative</p>
            </div>
            <div class="step-arrow">&#10132;</div>
            <div class="step-card">
                <div class="step-num">2</div>
                <div class="step-icon">&#9997;&#65039;</div>
                <h3>Write</h3>
                <p>Use our Mad Libs-style templates to craft a personal letter</p>
            </div>
            <div class="step-arrow">&#10132;</div>
            <div class="step-card">
                <div class="step-num">3</div>
                <div class="step-icon">&#128232;</div>
                <h3>Send</h3>
                <p>Send via email, print, or copy — your choice</p>
            </div>
            <div class="step-arrow">&#10132;</div>
            <div class="step-card">
                <div class="step-num">4</div>
                <div class="step-icon">&#127942;</div>
                <h3>Score!</h3>
                <p>Earn 10 points for your state and unlock achievements</p>
            </div>
        </div>
    </section>

    <!-- RESULTS SECTION (hidden until search) -->
    <section id="results-section" class="hidden">
        <div class="results-header">
            <h2 class="section-title">Your Representatives</h2>
            <p class="results-state-label">Showing results for <strong id="resultsStateName">—</strong> (ZIP: <span id="resultsZip">—</span>)</p>
        </div>
        <div id="rep-cards" class="rep-cards-grid">
            <!-- dynamically filled -->
        </div>
    </section>

    <!-- LETTER BUILDER -->
    <section id="letter-builder" class="hidden">
        <div class="letter-builder-inner">
            <div class="letter-header">
                <h2 class="section-title">Compose Your Letter</h2>
                <p>Writing to: <strong id="letterRecipient">—</strong></p>
            </div>

            <!-- Template selector -->
            <div class="template-selector">
                <label>Choose a topic:</label>
                <div id="topicButtons" class="topic-buttons">
                    <!-- filled by JS -->
                </div>
            </div>

            <!-- Mad Libs Form -->
            <div id="madlibsForm" class="madlibs-form hidden">
                <!-- filled by JS -->
            </div>

            <!-- Letter Preview -->
            <div id="letterPreview" class="letter-preview hidden">
                <div class="letter-paper">
                    <div id="letterContent" class="letter-text"></div>
                </div>
                <div class="letter-actions">
                    <button class="btn btn-primary" onclick="app.sendViaEmail()">
                        <span>&#128232;</span> Send via Email
                    </button>
                    <button class="btn btn-secondary" onclick="app.copyLetter()">
                        <span>&#128203;</span> Copy to Clipboard
                    </button>
                    <button class="btn btn-secondary" onclick="app.printLetter()">
                        <span>&#128424;</span> Print Letter
                    </button>
                    <button class="btn btn-accent" onclick="app.claimPoints()">
                        <span>&#127942;</span> I Sent It — Claim 10 Points!
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- LEADERBOARD + MAP -->
    <section id="leaderboard-section">
        <h2 class="section-title">State Leaderboard</h2>
        <p class="section-sub">Every letter earns 10 points for your state. Rally your neighbors!</p>

        <div class="leaderboard-layout">
            <!-- MAP -->
            <div class="map-container">
                <div id="us-map" class="us-map-wrapper">
                    <!-- SVG map rendered by JS -->
                </div>
                <div class="map-legend">
                    <span class="legend-label">Fewer letters</span>
                    <div class="legend-gradient"></div>
                    <span class="legend-label">More letters</span>
                </div>
            </div>

            <!-- LEADERBOARD TABLE -->
            <div class="leaderboard-panel">
                <div class="leaderboard-tabs">
                    <button class="lb-tab active" onclick="app.showLeaderboard('top')">Top 10</button>
                    <button class="lb-tab" onclick="app.showLeaderboard('all')">All States</button>
                    <button class="lb-tab" onclick="app.showLeaderboard('you')">Your State</button>
                </div>
                <div id="leaderboard-list" class="leaderboard-list">
                    <!-- filled by JS -->
                </div>
            </div>
        </div>
    </section>

    <!-- ACHIEVEMENTS -->
    <section id="achievements-section">
        <h2 class="section-title">Your Achievements</h2>
        <p class="section-sub">Unlock badges by writing letters and engaging with democracy</p>
        <div id="achievements-grid" class="achievements-grid">
            <!-- filled by JS -->
        </div>
        <div class="your-stats">
            <div class="stat-box">
                <div class="stat-big" id="statLetters">0</div>
                <div class="stat-desc">Letters Sent</div>
            </div>
            <div class="stat-box">
                <div class="stat-big" id="statStreak">0</div>
                <div class="stat-desc">Day Streak</div>
            </div>
            <div class="stat-box">
                <div class="stat-big" id="statLevel">1</div>
                <div class="stat-desc">Civic Level</div>
            </div>
            <div class="stat-box">
                <div class="stat-big" id="statStates">0</div>
                <div class="stat-desc">States Helped</div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer id="main-footer">
        <div class="footer-inner">
            <div class="footer-disclaimer">
                <div class="seal seal-small">
                    <div class="seal-inner">
                        <div class="seal-star">&#9733;</div>
                    </div>
                </div>
                <div>
                    <strong>Letter to Congress</strong> is an independent civic engagement project.<br>
                    It is <strong>not affiliated with, endorsed by, or connected to</strong> any government body, elected official, political party, or PAC.<br>
                    Contact information is sourced from publicly available government directories.<br>
                    No personal data is stored on any server — all progress is saved locally in your browser.
                </div>
            </div>
            <div class="footer-links">
                <p>&copy; 2026 Letter to Congress &mdash; An open-source civic tool</p>
            </div>
        </div>
    </footer>

    <!-- TOAST NOTIFICATIONS -->
    <div id="toast-container"></div>

    <!-- POINTS POPUP -->
    <div id="points-popup" class="points-popup hidden">
        <div class="points-popup-inner">
            <div class="points-popup-num">+10</div>
            <div class="points-popup-text">Points for <span id="pointsStateName">your state</span>!</div>
        </div>
    </div>

    <!-- LEVEL UP MODAL -->
    <div id="levelup-modal" class="modal hidden">
        <div class="modal-backdrop" onclick="app.closeLevelUp()"></div>
        <div class="modal-content">
            <div class="levelup-icon">&#11088;</div>
            <h2>Level Up!</h2>
            <p>You reached <strong>Civic Level <span id="newLevel">2</span></strong></p>
            <p id="levelTitle" class="level-title"></p>
            <button class="btn btn-primary" onclick="app.closeLevelUp()">Keep Going!</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
